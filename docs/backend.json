{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the VendaZap AI application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "Full name of the user."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        },
        "messageCount": {
          "type": "number",
          "description": "The number of messages the user has generated."
        }
      },
      "required": [
        "id",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "phone"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profile data. Access is restricted to the authenticated user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user, matching the Firebase Auth UID."
            }
          ]
        }
      }
    ],
    "reasoning": "This design prioritizes user authentication and data privacy using path-based ownership. All user data is stored under the `/users/{userId}` collection, ensuring only the authenticated user can access their specific data. This eliminates the need for complex security rules based on document content and ensures Authorization Independence, as access control relies solely on the authenticated `uid`. The `/users/{userId}` path structure facilitates simple, robust, and easily debuggable security rules and QAPs, as listing and reading data are inherently scoped to the authenticated user. This eliminates the need to filter data based on user ID within the rules, simplifying the security model."
  }
}
